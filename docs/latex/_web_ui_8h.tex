\doxysection{src/\+Web\+Ui.h File Reference}
\hypertarget{_web_ui_8h}{}\label{_web_ui_8h}\index{src/WebUi.h@{src/WebUi.h}}


Web UI and REST-\/like API for editing and knitting modes.  


{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$Web\+Server.\+h$>$}\newline
{\ttfamily \#include $<$Little\+FS.\+h$>$}\newline
{\ttfamily \#include "{}Pattern.\+h"{}}\newline
{\ttfamily \#include "{}App\+Config.\+h"{}}\newline
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_web_ui_deps}{Web\+Ui\+Deps}}
\begin{DoxyCompactList}\small\item\em Dependency bundle injected into the Web UI module. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{_web_ui_8h_acf4a4f866256c227b8c5f99446faed6c}{webui\+Begin}} (\mbox{\hyperlink{struct_web_ui_deps}{Web\+Ui\+Deps}} deps)
\begin{DoxyCompactList}\small\item\em Register all routes for the web UI on the provided server. \end{DoxyCompactList}\item 
String \mbox{\hyperlink{_web_ui_8h_a226e967c7bb5c864be0cfcac52bd0e4c}{list\+Pattern\+Files\+Json}} ()
\begin{DoxyCompactList}\small\item\em Return JSON array of stored pattern files (paths). \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_web_ui_8h_a804945cbd643a87781e7737511709cb3}{load\+Pattern\+File}} (const String \&path, \mbox{\hyperlink{struct_pattern}{Pattern}} \&p)
\begin{DoxyCompactList}\small\item\em Load a pattern from Little\+FS. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{_web_ui_8h_ac6418737eb1008213b0ed5749dde8893}{save\+Pattern\+File}} (const String \&path, const \mbox{\hyperlink{struct_pattern}{Pattern}} \&p)
\begin{DoxyCompactList}\small\item\em Save a pattern to Little\+FS. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Web UI and REST-\/like API for editing and knitting modes. 

The web UI is served from the ESP32 and provides\+:
\begin{DoxyItemize}
\item \doxylink{struct_pattern}{Pattern} editor (grid)
\item Knitting mode (active row highlight, confirm/step)
\item File management (Little\+FS, no SD card)
\item Device configuration (colors, brightness, behavior, row direction)
\end{DoxyItemize}

\doxylink{struct_pattern}{Pattern} files are stored under {\ttfamily /patterns} in Little\+FS as JSON. 

Definition in file \mbox{\hyperlink{_web_ui_8h_source}{Web\+Ui.\+h}}.



\label{doc-func-members}
\Hypertarget{_web_ui_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{_web_ui_8h_a226e967c7bb5c864be0cfcac52bd0e4c}\index{WebUi.h@{WebUi.h}!listPatternFilesJson@{listPatternFilesJson}}
\index{listPatternFilesJson@{listPatternFilesJson}!WebUi.h@{WebUi.h}}
\doxysubsubsection{\texorpdfstring{listPatternFilesJson()}{listPatternFilesJson()}}
{\footnotesize\ttfamily \label{_web_ui_8h_a226e967c7bb5c864be0cfcac52bd0e4c} 
String list\+Pattern\+Files\+Json (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Return JSON array of stored pattern files (paths). 



Definition at line \mbox{\hyperlink{_web_ui_8cpp_source_l00124}{124}} of file \mbox{\hyperlink{_web_ui_8cpp_source}{Web\+Ui.\+cpp}}.

\Hypertarget{_web_ui_8h_a804945cbd643a87781e7737511709cb3}\index{WebUi.h@{WebUi.h}!loadPatternFile@{loadPatternFile}}
\index{loadPatternFile@{loadPatternFile}!WebUi.h@{WebUi.h}}
\doxysubsubsection{\texorpdfstring{loadPatternFile()}{loadPatternFile()}}
{\footnotesize\ttfamily \label{_web_ui_8h_a804945cbd643a87781e7737511709cb3} 
bool load\+Pattern\+File (\begin{DoxyParamCaption}\item[{const String \&}]{path}{, }\item[{\mbox{\hyperlink{struct_pattern}{Pattern}} \&}]{p}{}\end{DoxyParamCaption})}



Load a pattern from Little\+FS. 


\begin{DoxyParams}{Parameters}
{\em path} & File path (either full path or just filename; will be normalized). \\
\hline
{\em p} & Destination pattern. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_web_ui_8cpp_source_l00103}{103}} of file \mbox{\hyperlink{_web_ui_8cpp_source}{Web\+Ui.\+cpp}}.

\Hypertarget{_web_ui_8h_ac6418737eb1008213b0ed5749dde8893}\index{WebUi.h@{WebUi.h}!savePatternFile@{savePatternFile}}
\index{savePatternFile@{savePatternFile}!WebUi.h@{WebUi.h}}
\doxysubsubsection{\texorpdfstring{savePatternFile()}{savePatternFile()}}
{\footnotesize\ttfamily \label{_web_ui_8h_ac6418737eb1008213b0ed5749dde8893} 
bool save\+Pattern\+File (\begin{DoxyParamCaption}\item[{const String \&}]{path}{, }\item[{const \mbox{\hyperlink{struct_pattern}{Pattern}} \&}]{p}{}\end{DoxyParamCaption})}



Save a pattern to Little\+FS. 


\begin{DoxyParams}{Parameters}
{\em path} & File path (either full path or just filename; will be normalized). \\
\hline
{\em p} & \doxylink{struct_pattern}{Pattern} to save. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true on success. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_web_ui_8cpp_source_l00115}{115}} of file \mbox{\hyperlink{_web_ui_8cpp_source}{Web\+Ui.\+cpp}}.

\Hypertarget{_web_ui_8h_acf4a4f866256c227b8c5f99446faed6c}\index{WebUi.h@{WebUi.h}!webuiBegin@{webuiBegin}}
\index{webuiBegin@{webuiBegin}!WebUi.h@{WebUi.h}}
\doxysubsubsection{\texorpdfstring{webuiBegin()}{webuiBegin()}}
{\footnotesize\ttfamily \label{_web_ui_8h_acf4a4f866256c227b8c5f99446faed6c} 
void webui\+Begin (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_web_ui_deps}{Web\+Ui\+Deps}}}]{deps}{}\end{DoxyParamCaption})}



Register all routes for the web UI on the provided server. 

Routes\+:
\begin{DoxyItemize}
\item GET {\ttfamily /} \+: HTML UI
\item GET {\ttfamily /api/files} \+: JSON list of pattern file paths
\item GET {\ttfamily /api/pattern} \+: Load pattern (query param {\ttfamily file})
\item POST {\ttfamily /api/pattern} \+: Save pattern (JSON body)
\item POST {\ttfamily /api/delete} \+: Delete file (JSON body)
\item POST {\ttfamily /api/row} \+: Step row (+1/-\/1) (JSON body)
\item POST {\ttfamily /api/confirm} \+: Confirm current row and optionally auto-\/advance
\item GET {\ttfamily /api/state} \+: Current state for polling
\item GET {\ttfamily /api/config} \+: Read config
\item POST {\ttfamily /api/config} \+: Update config
\item GET {\ttfamily /download} \+: Download a pattern file
\item POST {\ttfamily /upload} \+: Upload a pattern file 
\end{DoxyItemize}

Definition at line \mbox{\hyperlink{_web_ui_8cpp_source_l00862}{862}} of file \mbox{\hyperlink{_web_ui_8cpp_source}{Web\+Ui.\+cpp}}.

